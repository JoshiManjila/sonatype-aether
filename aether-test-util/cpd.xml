<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
<duplication lines="31" tokens="158">
<file line="31" path="/home/herve/projets/maven/sonatype-aether/aether-test-util/src/main/java/org/sonatype/aether/test/util/ArtifactDefinition.java"/>
<file line="329" path="/home/herve/projets/maven/sonatype-aether/aether-test-util/src/main/java/org/sonatype/aether/test/util/IniArtifactDataReader.java"/>
<codefragment>
<![CDATA[
        public Definition( String def )
        {
            this.definition = def.trim();

            if ( definition.startsWith( "(" ) )
            {
                int idx = definition.indexOf( ')' );
                this.id = definition.substring( 1, idx );
                this.definition = definition.substring( idx + 1 );
            }
            else if ( definition.startsWith( "^" ) )
            {
                this.reference = definition.substring( 1 );
                return;
            }

            String[] split = definition.split( ":" );
            if ( split.length < 4 )
            {
                throw new IllegalArgumentException( "Need definition like 'gid:aid:ext:ver[:scope]', but was: "
                    + definition );
            }
            groupId = split[0];
            artifactId = split[1];
            extension = split[2];
            version = split[3];
            if ( split.length > 4 )
            {
                scope = split[4];
            }
            if ( split.length > 5 && "true".equalsIgnoreCase( split[5] ) )
]]>
</codefragment>
</duplication>
</pmd-cpd>